<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>Kerberos 통합 인증을 사용하여 SQL Server에 연결</title><meta name="Language" content="ko-kr" /><meta name="Microsoft.Help.Id" content="687802dc-042a-4363-89aa-741685d165b3" /><meta name="Description" content="SQL Server용 Microsoft JDBC Driver 4.0부터 응용 프로그램에서 유형 4 Kerberos 통합 인증을 사용하여 데이터베이스에 연결한다는 것을 나타내기 위해 authenticationScheme 연결 속성을 사용할 수 있습니다. 연결 속성에 대한 자세한 내용은 Setting the Connection Properties을 참조하십시오." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><link rel="stylesheet" type="text/css" href="../local/Classic.css" /><script type="text/javascript" src="../scripts/EventUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/SplitScreen.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/Dropdown.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_manifold.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_feedBack.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CheckboxMenu.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CommonUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../local/script_main.js">&amp;nbsp;</script></head><body><div id="header"><table id="bottomTable" cellpadding="0" cellspacing="0"><tr><td align="left"><span id="headerBold">Kerberos 통합 인증을 사용하여 SQL Server에 연결</span></td></tr></table><table id="gradientTable"><tr><td class="nsrBottom" background="../icons/gradient.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div class="introduction"><p>SQL Server용 Microsoft JDBC Driver 4.0부터 응용 프로그램에서 유형 4 Kerberos 통합 인증을 사용하여 데이터베이스에 연결한다는 것을 나타내기 위해 <span sdata="langKeyword" value="authenticationScheme"><span class="keyword">authenticationScheme</span></span> 연결 속성을 사용할 수 있습니다. 연결 속성에 대한 자세한 내용은 <span sdata="link"><a href="f1b62700-f046-488d-bd6b-a5cd8fc345b7.htm">연결 속성 설정</a></span>을 참조하십시오. Kerberos에 대한 자세한 내용은 <a href="http://go.microsoft.com/fwlink/?LinkId=101449">Windows용 Kerberos 기술 자료 </a> 및 <a href="http://go.microsoft.com/fwlink/?LinkID=100758">Microsoft Kerberos</a>를 참조하십시오.</p><p>Java <span sdata="langKeyword" value="Krb5LoginModule"><span class="keyword">Krb5LoginModule</span></span>과 함께 통합 인증을 사용하면 <a href="http://download.oracle.com/javase/1.5.0/docs/guide/security/jaas/spec/com/sun/security/auth/module/Krb5LoginModule.html">Krb5LoginModule 클래스</a>를 사용하여 모듈을 구성할 수 있습니다.</p><p>SQL Server용 Microsoft JDBC Driver는 IBM Java VM에 대해 다음 속성을 설정합니다.</p><ul><li><p><span sdata="langKeyword" value="useDefaultCcache = true"><span class="keyword">useDefaultCcache = true</span></span></p></li><li><p><span sdata="langKeyword" value="moduleBanner = false"><span class="keyword">moduleBanner = false</span></span></p></li></ul><p>SQL Server용 Microsoft JDBC Driver는 다른 모든 Java VM에 대해 다음 속성을 설정합니다.</p><ul><li><p><span sdata="langKeyword" value="useTicketCache = true"><span class="keyword">useTicketCache = true</span></span></p></li><li><p><span sdata="langKeyword" value="doNotPrompt = true"><span class="keyword">doNotPrompt = true</span></span></p></li></ul></div><h1 class="heading">설명</h1><div id="sectionSection0" class="section" name="collapseableSection" style=""><p>SQL Server용 Microsoft JDBC Driver 4.0 이전에는 <span sdata="link"><a href="44996746-d373-4f59-9863-a8a20bb8024a.htm">연결 URL 작성</a></span>에 설명된 대로 응용 프로그램에서 <span sdata="langKeyword" value="integratedSecurity"><span class="keyword">integratedSecurity</span></span> 연결 속성을 사용하고 <span sdata="langKeyword" value="sqljdbc_auth.dll"><span class="keyword">sqljdbc_auth.dll</span></span>을 참조하여 통합 인증(Kerberos 또는 NTLM 중 사용 가능한 인증 사용)을 지정할 수 있었습니다.</p><p>SQL Server용 Microsoft JDBC Driver 4.0부터 응용 프로그램에서는 순수한 Java Kerberos 구현을 사용하는 Kerberos 통합 인증을 사용하여 데이터베이스에 연결한다는 것을 나타내기 위해 <span sdata="langKeyword" value="authenticationScheme"><span class="keyword">authenticationScheme</span></span> 연결 속성을 사용할 수 있습니다.</p><ul><li><p><span sdata="langKeyword" value="Krb5LoginModule"><span class="keyword">Krb5LoginModule</span></span>을 사용하는 통합 인증을 원하는 경우 <span sdata="langKeyword" value="integratedSecurity=true"><span class="keyword">integratedSecurity=true</span></span> 연결 속성도 지정해야 합니다. 그런 다음 <span sdata="langKeyword" value="authenticationScheme=JavaKerberos"><span class="keyword">authenticationScheme=JavaKerberos</span></span> 연결 속성도 지정해야 합니다.</p></li><li><p><span sdata="langKeyword" value="sqljdbc_auth.dll"><span class="keyword">sqljdbc_auth.dll</span></span>과 함께 계속 통합 인증을 사용하려면 <span sdata="langKeyword" value="integratedSecurity=true"><span class="keyword">integratedSecurity=true</span></span> 연결 속성(및 선택적으로 <span sdata="langKeyword" value="authenticationScheme=NativeAuthentication"><span class="keyword">authenticationScheme=NativeAuthentication</span></span>)만 지정합니다.</p></li><li><p><span sdata="langKeyword" value="authenticationScheme=JavaKerberos"><span class="keyword">authenticationScheme=JavaKerberos</span></span>는 지정하고 <span sdata="langKeyword" value="integratedSecurity=true"><span class="keyword">integratedSecurity=true</span></span>는 지정하지 않은 경우 드라이버는 <span sdata="langKeyword" value="authenticationScheme"><span class="keyword">authenticationScheme</span></span> 연결 속성을 무시하고 연결 문자열에서 사용자 이름과 암호 자격 증명을 찾습니다.</p></li></ul><p>데이터 원본을 사용하여 연결을 만들 때 <a href="b942f78e-7ce1-44ef-923d-a7c3d7c76b83.htm">setAuthenticationScheme</a>를 사용하여 프로그래밍 방식으로 인증 체계를 설정할 수 있습니다.</p><p>Kerberos 인증 com.microsoft.sqlserver.jdbc.internals.KerbAuthentication을 지원하기 위해 새로운 로거가 추가되었습니다. 자세한 내용은 <span sdata="link"><a href="723aeae7-6504-4585-ba8b-3525115bea8b.htm">드라이버 작업 추적</a></span>을 참조하십시오.</p><p>다음 지침은 Kerberos 구성에 도움이 될 것입니다.</p><ol><li><p>Windows용 레지스트리에서 <span sdata="langKeyword" value="AllowTgtSessionKey"><span class="keyword">AllowTgtSessionKey</span></span>를 1로 설정합니다. 자세한 내용은 <a href="http://support.microsoft.com/kb/837361">Windows Server 2003의 Kerberos 프로토콜 레지스트리 항목 및 KDC 구성 키</a>를 참조하십시오.</p></li><li><p>Kerberos 구성(UNIX 환경에서 krb5.conf)이 사용자 환경의 올바른 영역과 KDC를 가리키는지 확인하십시오.</p></li><li><p>kinit을 사용하거나 도메인에 로그인하여 TGT 캐시를 초기화합니다.</p></li><li><p><span sdata="langKeyword" value="authenticationScheme=JavaKerberos"><span class="keyword">authenticationScheme=JavaKerberos</span></span>를 사용하는 응용 프로그램이 Windows Vista 또는 Windows 7 운영 체제에서 실행될 때는 표준 사용자 계정을 사용해야 합니다. 그러나 관리자 계정에서 응용 프로그램을 실행하는 경우 관리자 권한을 사용하여 응용 프로그램을 실행해야 합니다.</p></li></ol></div><h1 class="heading">서비스 사용자 이름</h1><div id="sectionSection1" class="section" name="collapseableSection" style=""><p>SPN(서비스 사용자 이름)은 클라이언트가 서비스 인스턴스를 고유하게 식별하는 이름입니다. SPN(서비스 사용자 이름)에 대한 자세한 내용은 다음을 참조하십시오.</p><ul><li><p><a href="http://support.microsoft.com/kb/319723">SQL Server에서 Kerberos 인증을 사용하는 방법</a></p></li><li><p><a href="http://go.microsoft.com/fwlink/?LinkId=207814">SQL Server에서 Kerberos 사용</a></p></li></ul></div><h1 class="heading">로그인 모듈 구성 파일 만들기</h1><div id="sectionSection2" class="section" name="collapseableSection" style=""><p>선택적으로 Kerberos 구성 파일을 지정할 수 있습니다. 구성 파일을 지정하지 않은 경우 다음 설정이 적용됩니다.</p><dl class="authored"><dt>Sun JVM</dt><dd><p>com.sun.security.auth.module.Krb5LoginModule에 useTicketCache=true doNotPrompt=true가 필요</p></dd><dt>IBM JVM</dt><dd><p>com.ibm.security.auth.module.Krb5LoginModule에 useDefaultCcache = true moduleBanner = false가 필요</p></dd></dl><p>로그인 모듈 구성 파일을 만들기로 결정했으면 파일은 다음 형식을 따라야 합니다.</p><div class="sampleCode"><span codeLanguage="other"><pre>&lt;<i>name</i>&gt; {
    &lt;<i>LoginModule</i>&gt; &lt;<i>flag</i>&gt; &lt;<i>LoginModule options</i>&gt;;
    &lt;<i>optional_additional_LoginModules</i>, <i>flags_and_options</i>&gt;;
};</pre></span></div><p>로그인 구성 파일은 하나 이상의 항목으로 구성되며, 각 항목은 특정 응용 프로그램에 사용해야 하는 기본 인증 기술을 지정합니다. 예를 들면 다음과 같습니다.</p><div class="sampleCode"><span codeLanguage="other"><pre>SQLJDBCDriver {
   com.sun.security.auth.module.Krb5LoginModule required useTicketCache=true doNotPrompt=true;
};</pre></span></div><p>따라서 각 로그인 모듈 구성 파일 항목은 이름과 하나 이상의 LoginModule 관련 항목으로 구성되며, 각 LoginModule 관련 항목은 세미콜론으로 끝나고 LoginModule 관련 항목의 전체 그룹은 중괄호로 묶입니다. 각 구성 파일 항목은 세미콜론으로 끝납니다.</p><p>로그인 모듈 구성 파일에 지정된 설정을 사용하여 드라이버가 Kerberos 자격 증명을 얻을 수 있도록 하면서 기존 자격 증명을 사용할 수 있습니다. 이것은 응용 프로그램이 둘 이상의 사용자 자격 증명을 사용하여 연결을 만들어야 할 때 유용할 수 있습니다.</p><p>드라이버는 지정된 로그인 모듈을 사용하여 로그인을 시도하기 전에 사용 가능한 경우 기존 자격 증명을 사용하려고 시도합니다. 따라서 특정 컨텍스트에서 코드를 실행하기 위해 Subject.doAs 메서드를 사용할 때 Subject.doAs 호출에 전달된 자격 증명을 사용하여 연결이 만들어집니다.</p><p>자세한 내용은 <a href="http://download.oracle.com/javase/1.4.2/docs/guide/security/jaas/tutorials/LoginConfigFile.html">JAAS 로그인 구성 파일</a> 및 <a href="http://download.oracle.com/javase/1.5.0/docs/guide/security/jgss/tutorials/KerberosReq.html">Krb5LoginModule 클래스</a>를 참조하십시오.</p></div><h1 class="heading">Kerberos 구성 파일 만들기</h1><div id="sectionSection3" class="section" name="collapseableSection" style=""><p>Kerberos 구성 파일에 대한 자세한 내용은 <a href="http://download.oracle.com/javase/1.4.2/docs/guide/security/jaas/tutorials/LoginConfigFile.html">Kerberos 요구 사항</a>을 참조하십시오.</p><p>이것은 샘플 도메인 구성 파일입니다. 여기서 YYYY 및 ZZZZ는 해당 사이트의 도메인 이름입니다.</p><div class="sampleCode"><span codeLanguage="other"><pre>[libdefaults]
default_realm = YYYY.CORP.CONTOSO.COM
dns_lookup_realm = false
dns_lookup_kdc = true
ticket_lifetime = 24h
forwardable = yes

[domain_realm]
.yyyy.corp.contoso.com = YYYY.CORP.CONTOSO.COM
.zzzz.corp.contoso.com = ZZZZ.CORP.CONTOSO.COM

[realms]
        YYYY.CORP.CONTOSO.COM = {
  kdc = krbtgt/YYYY.CORP. CONTOSO.COM @ YYYY.CORP. CONTOSO.COM
  default_domain = YYYY.CORP. CONTOSO.COM
}

        ZZZZ.CORP. CONTOSO.COM = {
  kdc = krbtgt/ZZZZ.CORP. CONTOSO.COM @ ZZZZ.CORP. CONTOSO.COM
  default_domain = ZZZZ.CORP. CONTOSO.COM
}
</pre></span></div></div><h1 class="heading">도메인 구성 파일 및 로그인 모듈 구성 파일 활성화</h1><div id="sectionSection4" class="section" name="collapseableSection" style=""><p>-Djava.security.krb5.conf를 사용하여 도메인 구성 파일을 활성화할 수 있습니다. <span sdata="langKeyword" value="-Djava.security.auth.login.config"><span class="keyword">-Djava.security.auth.login.config</span></span>를 사용하여 로그인 모듈 구성 파일을 활성화할 수 있습니다.</p><p>예를 들어, 응용 프로그램을 시작할 때 다음 명령줄을 사용할 수 있습니다.</p><div class="sampleCode"><span codeLanguage="other"><pre>Java.exe -Djava.security.auth.login.config=SQLJDBCDriver.conf -Djava.security.krb5.conf=krb5.ini &lt;<i>APPLICATION_NAME</i>&gt;
</pre></span></div></div><h1 class="heading">Kerberos를 통해 SQL Server에 액세스할 수 있는지 확인</h1><div id="sectionSection5" class="section" name="collapseableSection" style=""><p>SQL Server Management Studio에서 다음 쿼리 실행:</p><p><span sdata="langKeyword" value="select auth_scheme from sys.dm_exec_connections where session_id=@@spid"><span class="keyword">select auth_scheme from sys.dm_exec_connections where session_id=@@spid</span></span></p><p>이 쿼리를 실행하는 데 필요한 권한이 있는지 확인하십시오.</p></div><span id="seeAlsoSpan"><h1 class="heading">참고 항목</h1></span><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><div class="seeAlsoStyle"><span sdata="link"><a href="94bcfbe3-f00e-4774-bda8-bb7577518fec.htm">JDBC 드라이버로 SQL Server에 연결</a></span></div></div></div><div id="footer" class="section"><span id="feedbackarea">이 항목에 대한 <a href="javascript:SubmitFeedback('DevDocs@Microsoft.com','','','','8.0.12060.10000','%0\d의견을%20보내주셔서%20감사합니다.%20개발자%20작성%20팀에서는%20설명서를%20보완하는%20데%20보내주신%20의견을%20적극%20활용하고%20있습니다.%20보내주신%20의견을%20검토하는%20동안%20명확한%20설명이%20필요하거나%20해결책에%20대한%20추가%20의견을%20묻는%20전자%20메일을%20받을%20수%20있습니다.%20귀하의%20전자%20메일은%20기타%20다른%20용도로%20사용되지%20않고%20검토가%20끝난%20후%20바로%20폐기됩니다.%0\AMicrosoft의%20개인%20정보%20취급%20방침에%20대한%20자세한%20내용은%20http://privacy.microsoft.com/ko-kr/default.aspx를%20참조하십시오.%0\A%0\d','고객%20의견');">사용자 의견</a>을 Microsoft로 보내 주십시오.</span><span id="copyrightarea"><p><a href="9bad553b-9e70-4696-8499-2e35f772a1e0.htm">© 2012 Microsoft. All rights reserved.</a></p></span></div></div></body></html>