<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>고가용성, 재해 복구를 위한 JDBC 드라이브 지원</title><meta name="Language" content="ko-kr" /><meta name="Microsoft.Help.Id" content="62de4be6-b027-427d-a7e5-352960e42877" /><meta name="Description" content="이 항목에서는 고가용성 재해 복구를 위한 SQL Server용 Microsoft JDBC Driver 지원인 AlwaysOn 가용성 그룹에 대해 설명합니다. AlwaysOn 가용성 그룹에 대한 자세한 내용은 SQL Server 2012 온라인 설명서를 참조하십시오." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><link rel="stylesheet" type="text/css" href="../local/Classic.css" /><script type="text/javascript" src="../scripts/EventUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/SplitScreen.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/Dropdown.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_manifold.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_feedBack.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CheckboxMenu.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CommonUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../local/script_main.js">&amp;nbsp;</script></head><body><div id="header"><table id="bottomTable" cellpadding="0" cellspacing="0"><tr><td align="left"><span id="headerBold">고가용성, 재해 복구를 위한 JDBC 드라이브 지원</span></td></tr></table><table id="gradientTable"><tr><td class="nsrBottom" background="../icons/gradient.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div class="introduction"><p>이 항목에서는 고가용성 재해 복구를 위한 SQL Server용 Microsoft JDBC Driver 지원인 AlwaysOn 가용성 그룹에 대해 설명합니다. AlwaysOn 가용성 그룹에 대한 자세한 내용은 SQL Server 2012 온라인 설명서를 참조하십시오.</p><p>SQL Server용 Microsoft JDBC Driver 4.0 버전부터 연결 속성에 (고가용성, 재해 복구) 가용성 그룹(AG)의 가용성 그룹 수신기를 지정할 수 있습니다. SQL Server용 Microsoft JDBC Driver 응용 프로그램이 장애 조치되는 AlwaysOn 데이터베이스에 연결되는 경우 원래 연결이 끊어지고 장애 조치 후 작업을 계속하려면 응용 프로그램은 새 연결을 열어야 합니다.</p><p>가용성 그룹 수신기에 연결하지 않고 여러 IP 주소가 서버에 연결된 경우 SQL Server용 Microsoft JDBC Driver은 첫 번째 IP 주소에 연결을 시도합니다. SQL Server용 Microsoft JDBC Driver가 첫 번째 IP 주소와 연결을 설정할 수 없는 경우 연결은 실패합니다. SQL Server용 Microsoft JDBC Driver는 서버와 연결된 후속 IP 주소에는 연결을 시도하지 않습니다. 가용성 그룹 수신기에 연결할 때 SQL Server용 Microsoft JDBC Driver는 모든 IP 주소에 병렬로 연결을 설정하려고 시도하며 연결 시도가 성공하면 드라이버는 보류 중인 연결 시도를 삭제합니다.</p><div style="margin: .5em 1.5em .5em 1.5em"><b></b><p>연결 시간 제한을 늘리고 연결 재시도 논리를 구현하면 응용 프로그램에서 가용성 그룹에 연결할 가능성이 높아집니다. 또한 가용성 그룹 장애 조치로 인해 연결이 실패할 수 있기 때문에 다시 연결될 때까지 실패한 연결을 재시도할 수 있도록 연결 재시도 논리를 구현해야 합니다.</p></div><p>다음 <a href="f1b62700-f046-488d-bd6b-a5cd8fc345b7.htm">연결 속성</a>이 SQL Server용 Microsoft JDBC Driver 4.0에 추가되었습니다.</p><ul><li><p><span sdata="langKeyword" value="multiSubnetFailover"><span class="keyword">multiSubnetFailover</span></span></p></li><li><p><span sdata="langKeyword" value="applicationIntent"><span class="keyword">applicationIntent</span></span></p></li></ul></div><h1 class="heading">MultiSubnetFailover에 연결</h1><div id="sectionSection0" class="section" name="collapseableSection" style=""><p>SQL Server 2012 가용성 그룹 또는 SQL Server 2012 장애 조치 클러스터 인스턴스의 가용성 그룹 수신기에 연결할 때 항상 <span sdata="langKeyword" value="multiSubnetFailover=true"><span class="keyword">multiSubnetFailover=true</span></span>를 지정하십시오. <span sdata="langKeyword" value="multiSubnetFailover"><span class="keyword">multiSubnetFailover</span></span>를 사용하면 SQL Server 2012에 있는 모든 가용성 그룹과 장애 조치 클러스터 인스턴스에 대해 보다 빠른 장애 조치를 수행할 수 있으며 단일 및 다중 서브넷 AlwaysOn 토폴로지에 대한 장애 조치 시간을 크게 줄일 수 있습니다. 다중 서브넷 장애 조치 동안 클라이언트는 병렬로 연결을 시도합니다. 서브넷 장애 조치 동안 SQL Server용 Microsoft JDBC Driver는 TCP 연결을 공격적으로 재시도합니다.</p><p><span sdata="langKeyword" value="multiSubnetFailover"><span class="keyword">multiSubnetFailover</span></span> 연결 속성은 가용성 그룹 또는 장애 조치 클러스터 인스턴스에 응용 프로그램이 배포 중이며 SQL Server용 Microsoft JDBC Driver이 모든 IP 주소에 연결을 시도함으로써 주 SQL Server 인스턴스에 있는 데이터베이스에 연결을 시도함을 의미합니다. 연결에 대해 <span sdata="langKeyword" value="MultiSubnetFailover=true"><span class="keyword">MultiSubnetFailover=true</span></span>가 지정되면 클라이언트는 운영 체제의 기본 TCP 재전송 간격보다 빠르게 TCP 연결을 다시 시도합니다. 따라서 AlwaysOn 가용성 그룹 또는 AlwaysOn 장애 조치 클러스터 인스턴스를 장애 조치한 후에 더욱 빠르게 다시 연결할 수 있으며 단일 및 다중 서브넷 가용성 그룹과 장애 조치 클러스터 인스턴스 모두에 적용됩니다.</p><p>SQL Server용 Microsoft JDBC Driver에서 연결 문자열 키워드에 대한 자세한 내용은 <span sdata="link"><a href="f1b62700-f046-488d-bd6b-a5cd8fc345b7.htm">연결 속성 설정</a></span>을 참조하십시오.</p><p>가용성 그룹 수신기 또는 장애 조치 클러스터 인스턴스 이외의 어떤 것에 연결할 때 <span sdata="langKeyword" value="multiSubnetFailover=true"><span class="keyword">multiSubnetFailover=true</span></span>를 지정하면 성능에 부정적인 영향을 미칠 수 있으며 지원되지 않습니다.</p><p>보안 관리자가 설치되지 않은 경우 Java Virtual Machine은 기본적으로 JDK 구현 및 Java 속성 networkaddress.cache.ttl 및 networkaddress.cache.negative.ttl에 정의된 제한 시간 동안 VIP(가상 IP 주소)를 캐시합니다. JDK 보안 관리자가 설치된 경우 Java Virtual Machine은 VIP를 캐시하고 기본적으로 캐시를 새로 고치지 않습니다. Java Virtual Machine 캐시에 대해 "TTL(time-to-live)"(networkaddress.cache.ttl)을 1일로 설정해야 합니다. 기본값을 1일(정도)로 변경하지 않으면 VIP를 추가하거나 업데이트할 때 Java Virtual Machine 캐시에서 기존 값이 삭제되지 않습니다. networkaddress.cache.ttl 및 networkaddress.cache.negative.ttl에 대한 자세한 내용은 <a href="http://download.oracle.com/javase/6/docs/technotes/guides/net/properties.html">http://download.oracle.com/javase/6/docs/technotes/guides/net/properties.html</a>을 참조하십시오.</p><p>다음 지침을 사용하여 가용성 그룹 또는 장애 조치 클러스터 인스턴스에 있는 서버에 연결합니다.</p><ul><li><p><span sdata="langKeyword" value="instanceName"><span class="keyword">instanceName</span></span> 연결 속성이 <span sdata="langKeyword" value="multiSubnetFailover"><span class="keyword">multiSubnetFailover</span></span> 연결 속성과 같은 연결 문자열에서 사용되는 경우 드라이버는 오류를 생성합니다. 이는 SQL Browser가 가용성 그룹에 사용되지 않는다는 사실을 반영합니다. 그러나 <span sdata="langKeyword" value="portNumber"><span class="keyword">portNumber</span></span> 연결 속성도 지정된 경우 드라이버는 <span sdata="langKeyword" value="instanceName"><span class="keyword">instanceName</span></span>을 무시하고 <span sdata="langKeyword" value="portNumber"><span class="keyword">portNumber</span></span>를 사용합니다.</p></li><li><p>단일 서브넷 또는 다중 서브넷에 연결할 때 <span sdata="langKeyword" value="multiSubnetFailover"><span class="keyword">multiSubnetFailover</span></span> 연결 속성을 사용하면 두 서브넷의 성능이 향상됩니다.</p></li><li><p>가용성 그룹에 연결하려면 연결 문자열에서 가용성 그룹의 가용성 그룹 수신기를 서버로 지정합니다. 예를 들어, jdbc:sqlserver://VNN1입니다.</p></li><li><p>64개를 초과하는 IP 주소로 구성된 SQL Server 인스턴스에 연결하면 연결이 실패합니다.</p></li><li><p><span sdata="langKeyword" value="multiSubnetFailover"><span class="keyword">multiSubnetFailover</span></span> 연결 속성을 사용하는 응용 프로그램 동작은 SQL Server 인증, Kerberos 인증, Windows 인증 등의 인증 유형에 영향을 받지 않습니다.</p></li><li><p>장애 조치 시간을 수용하도록 <span sdata="langKeyword" value="loginTimeout"><span class="keyword">loginTimeout</span></span> 값을 늘리고 응용 프로그램 연결 재시도 횟수를 줄입니다.</p></li><li><p>분산 트랜잭션은 지원되지 않습니다.</p></li></ul><p>읽기 전용 라우팅을 적용하지 않은 경우 다음과 같은 상황에서 가용성 그룹의 보조 복제 위치에 연결하면 실패합니다.</p><ol><li><p>연결을 수용하도록 보조 복제 위치를 구성하지 않은 경우</p></li><li><p>응용 프로그램이 <span sdata="langKeyword" value="applicationIntent=ReadWrite"><span class="keyword">applicationIntent=ReadWrite</span></span>(아래에서 설명)를 사용하고 읽기 전용 액세스를 위한 보조 복제 위치가 구성된 경우</p></li></ol><p>읽기 전용 작업을 거부하도록 기본 복제가 구성되고 연결 문자열에 <span sdata="langKeyword" value="ApplicationIntent=ReadOnly"><span class="keyword">ApplicationIntent=ReadOnly</span></span>가 포함된 경우 연결이 실패합니다.</p></div><h1 class="heading">데이터베이스 미러링에서 다중 서브넷 클러스터로 업그레이드</h1><div id="sectionSection1" class="section" name="collapseableSection" style=""><p>현재 데이터베이스 미러링을 사용하는 SQL Server용 Microsoft JDBC Driver 응용 프로그램을 다중 서브넷 시나리오로 업그레이드하는 경우 <span sdata="langKeyword" value="failoverPartner"><span class="keyword">failoverPartner</span></span> 연결 속성을 제거하고 <span sdata="langKeyword" value="true"><span class="keyword">true</span></span>로 설정된 <span sdata="langKeyword" value="multiSubnetFailover"><span class="keyword">multiSubnetFailover</span></span>로 바꾸고 연결 문자열의 서버 이름을 가용성 그룹 수신기로 바꿔야 합니다. 연결 문자열이 <span sdata="langKeyword" value="failoverPartner"><span class="keyword">failoverPartner</span></span> 및 <span sdata="langKeyword" value="multiSubnetFailover=true"><span class="keyword">multiSubnetFailover=true</span></span>를 사용하는 경우 드라이버에서가 오류가 생성됩니다. 그러나 연결 문자열이 <span sdata="langKeyword" value="failoverPartner"><span class="keyword">failoverPartner</span></span> 및 <span sdata="langKeyword" value="multiSubnetFailover=false"><span class="keyword">multiSubnetFailover=false</span></span>(또는 <span sdata="langKeyword" value="ApplicationIntent=ReadWrite"><span class="keyword">ApplicationIntent=ReadWrite</span></span>)를 사용하는 경우 응용 프로그램은 데이터베이스 미러링을 사용합니다.</p><p>AG의 기본 데이터베이스에서 데이터베이스 미러링이 사용되고 가용성 그룹 수신기 대신 기본 데이터베이스에 연결하는 연결 문자열에 <span sdata="langKeyword" value="multiSubnetFailover=true"><span class="keyword">multiSubnetFailover=true</span></span>가 사용된 경우 드라이버에서 오류를 반환합니다.</p></div><h1 class="heading">응용 프로그램 의도 지정</h1><div id="sectionSection2" class="section" name="collapseableSection" style=""><p><span sdata="langKeyword" value="applicationIntent=ReadOnly"><span class="keyword">applicationIntent=ReadOnly</span></span>이면 AlwaysOn이 활성화된 데이터베이스에 연결할 때 클라이언트는 읽기 전용 작업을 요청합니다. 서버는 연결 시간 및 USE 데이터베이스 문 동안 AlwaysOn이 활성화된 데이터베이스에만 의도를 시행합니다.</p><p><span sdata="langKeyword" value="applicationIntent"><span class="keyword">applicationIntent</span></span> 키워드는 레거시, 읽기 전용 데이터베이스에서 작동하지 않습니다.</p><p>데이터베이스는 대상이 지정된 AlwaysOn 데이터베이스에서 읽기 작업을 허용하거나 허용하지 않을 수 있습니다. (이는 <span sdata="langKeyword" value="PRIMARY_ROLE"><span class="keyword">PRIMARY_ROLE</span></span> 및 <span sdata="langKeyword" value="SECONDARY_ROLE"><span class="keyword">SECONDARY_ROLE</span></span> Transact-SQL 문의 <span sdata="langKeyword" value="ALLOW_CONNECTIONS"><span class="keyword">ALLOW_CONNECTIONS</span></span> 절을 사용하여 수행됩니다.)</p><p><span sdata="langKeyword" value="applicationIntent"><span class="keyword">applicationIntent</span></span> 키워드는 읽기 전용 라우팅을 활성화하는 데 사용됩니다.</p></div><h1 class="heading">읽기 전용 라우팅</h1><div id="sectionSection3" class="section" name="collapseableSection" style=""><p>읽기 전용 라우팅은 데이터베이스의 읽기 전용 복제 가용성을 보장할 수 있는 기능입니다. 읽기 전용 라우팅을 활성화하려면:</p><ol><li><p>AlwaysOn 가용성 그룹 가용성 그룹 수신기에 연결해야 합니다.</p></li><li><p><span sdata="langKeyword" value="applicationIntent"><span class="keyword">applicationIntent</span></span> 연결 문자열 키워드는 <span sdata="langKeyword" value="ReadOnly"><span class="keyword">ReadOnly</span></span>로 설정해야 합니다.</p></li><li><p> 읽기 전용 라우팅을 활성화하려면 데이터베이스 관리자가 가용성 그룹을 구성해야 합니다.</p></li></ol><p>읽기 전용 라우팅을 사용하는 여러 연결이 동일한 읽기 전용 복제에 모두 연결되지 않을 가능성이 있습니다. 데이터베이스 동기화의 변경 또는 서버 라우팅 구성의 변경으로 인해 클라이언트가 다른 읽기 전용 복제로 연결될 수 있습니다. 모든 읽기 전용 요청이 동일한 읽기 전용 복제에 연결되도록 하려면 가용성 그룹 수신기 또는 가상 IP 주소를 <span sdata="langKeyword" value="serverName"><span class="keyword">serverName</span></span> 연결 문자열 키워드로 전달하지 마십시오. 대신 읽기 전용 인스턴스의 이름을 지정합니다.</p><p>읽기 전용 라우팅은 먼저 기본 복제에 연결한 다음 가장 사용 가능한 읽기 가능 보조 복제를 찾으므로 읽기 전용 라우팅은 기본 복제에 연결하는 것보다 시간이 오래 걸릴 수 있습니다. 따라서 로그인 제한 시간을 늘려야 합니다.</p></div><h1 class="heading">multiSubnetFailover 및 applicationIntent를 지원하는 새 메서드</h1><div id="sectionSection4" class="section" name="collapseableSection" style=""><p>다음 메서드는 <span sdata="langKeyword" value="multiSubnetFailover"><span class="keyword">multiSubnetFailover</span></span> 및 <span sdata="langKeyword" value="applicationIntent"><span class="keyword">applicationIntent</span></span> 연결 문자열 키워드에 대한 프로그래밍 방식 액세스를 제공합니다.</p><ul><li><p><a href="19411e6c-c456-4533-8252-54569a2a6b1f.htm">SQLServerDataSource.getApplicationIntent</a></p></li><li><p><a href="e164c8ac-a0ae-4638-affb-ed454e7c0708.htm">SQLServerDataSource.setApplicationIntent</a></p></li><li><p><a href="1e8cb175-5f4c-4208-b4f5-3646990a30e3.htm">SQLServerDataSource.getMultiSubnetFailover</a></p></li><li><p><a href="7ffd282d-c2f6-4d1b-a7a6-859d18b388aa.htm">SQLServerDataSource.setMultiSubnetFailover</a></p></li><li><p><a href="b5eaad8a-31ef-44ac-af11-d5caa13ac3e2.htm">SQLServerDriver.getPropertyInfo</a></p></li></ul><p><span sdata="langKeyword" value="getMultiSubnetFailover"><span class="keyword">getMultiSubnetFailover</span></span>, <span sdata="langKeyword" value="setMultiSubnetFailover"><span class="keyword">setMultiSubnetFailover</span></span>, <span sdata="langKeyword" value="getApplicationIntent"><span class="keyword">getApplicationIntent</span></span> 및 <span sdata="langKeyword" value="setApplicationIntent"><span class="keyword">setApplicationIntent</span></span> 메서드는 <span sdata="link"><a href="097434fd-2b74-411c-a5ed-eba04481dde5.htm">SQLServerDataSource 클래스</a></span>, <span sdata="link"><a href="b00e5a90-2af7-4d04-8ef8-256183777dcf.htm">SQLServerConnectionPoolDataSource 클래스</a></span> 및 <span sdata="link"><a href="95fc7b07-2498-4a7e-8f7f-ee0d86b598b4.htm">SQLServerXADataSource 클래스</a></span>에도 추가됩니다.</p></div><h1 class="heading">SSL 인증서의 유효성 검사</h1><div id="sectionSection5" class="section" name="collapseableSection" style=""><p>가용성 그룹은 여러 물리적 서버로 구성됩니다. SQL Server용 Microsoft JDBC Driver 4.0에서는 여러 호스트가 같은 인증서에 연결될 수 있도록 SSL 인증서에 <span sdata="langKeyword" value="Subject Alternate Name"><span class="keyword">Subject Alternate Name</span></span>에 대한 지원을 추가했습니다. SSL에 대한 자세한 내용은 <span sdata="link"><a href="073f3b9e-8edd-4815-88ea-de0655d0325e.htm">SSL 지원 이해</a></span>를 참조하십시오.</p></div><span id="seeAlsoSpan"><h1 class="heading">참고 항목</h1></span><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><div class="seeAlsoStyle"><span sdata="link"><a href="f1b62700-f046-488d-bd6b-a5cd8fc345b7.htm">연결 속성 설정</a></span></div><div class="seeAlsoStyle"><span sdata="link"><a href="94bcfbe3-f00e-4774-bda8-bb7577518fec.htm">JDBC 드라이버로 SQL Server에 연결</a></span></div></div></div><div id="footer" class="section"><span id="feedbackarea">이 항목에 대한 <a href="javascript:SubmitFeedback('DevDocs@Microsoft.com','','','','8.0.12060.10000','%0\d의견을%20보내주셔서%20감사합니다.%20개발자%20작성%20팀에서는%20설명서를%20보완하는%20데%20보내주신%20의견을%20적극%20활용하고%20있습니다.%20보내주신%20의견을%20검토하는%20동안%20명확한%20설명이%20필요하거나%20해결책에%20대한%20추가%20의견을%20묻는%20전자%20메일을%20받을%20수%20있습니다.%20귀하의%20전자%20메일은%20기타%20다른%20용도로%20사용되지%20않고%20검토가%20끝난%20후%20바로%20폐기됩니다.%0\AMicrosoft의%20개인%20정보%20취급%20방침에%20대한%20자세한%20내용은%20http://privacy.microsoft.com/ko-kr/default.aspx를%20참조하십시오.%0\A%0\d','고객%20의견');">사용자 의견</a>을 Microsoft로 보내 주십시오.</span><span id="copyrightarea"><p><a href="9bad553b-9e70-4696-8499-2e35f772a1e0.htm">© 2012 Microsoft. All rights reserved.</a></p></span></div></div></body></html>