<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>확장 이벤트 로그의 진단 정보에 액세스</title><meta name="Language" content="ko-kr" /><meta name="Microsoft.Help.Id" content="a79e9468-2257-4536-91f1-73b008c376c3" /><meta name="Description" content="SQL Server용 Microsoft JDBC Driver 4.0에서 추적(Tracing Driver Operation)이 업데이트되어 서버의 연결 링 버퍼와 확장 이벤트 로그의 응용 프로그램 성능 정보에서 클라이언트 이벤트와 진단 정보(예: 연결 실패)의 상관 관계를 손쉽게 지정할 수 있게 되었습니다. 확장 이벤트 로그를 읽는 방법에 대한 자세한 내용은 이벤트 세션 데이터 보기http://msdn.microsoft." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><link rel="stylesheet" type="text/css" href="../local/Classic.css" /><script type="text/javascript" src="../scripts/EventUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/SplitScreen.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/Dropdown.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_manifold.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_feedBack.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CheckboxMenu.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CommonUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../local/script_main.js">&amp;nbsp;</script></head><body><div id="header"><table id="bottomTable" cellpadding="0" cellspacing="0"><tr><td align="left"><span id="headerBold">확장 이벤트 로그의 진단 정보에 액세스</span></td></tr></table><table id="gradientTable"><tr><td class="nsrBottom" background="../icons/gradient.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div class="introduction"><p>SQL Server용 Microsoft JDBC Driver 4.0에서 추적(<span sdata="link"><a href="723aeae7-6504-4585-ba8b-3525115bea8b.htm">드라이버 작업 추적</a></span>)이 업데이트되어 서버의 연결 링 버퍼와 확장 이벤트 로그의 응용 프로그램 성능 정보에서 클라이언트 이벤트와 진단 정보(예: 연결 실패)의 상관 관계를 손쉽게 지정할 수 있게 되었습니다. 확장 이벤트 로그를 읽는 방법에 대한 자세한 내용은 <a href="http://msdn.microsoft.com/ko-kr/library/hh710068(SQL.110).aspx ">이벤트 세션 데이터 보기</a>를 참조하십시오.</p></div><h1 class="heading">세부 정보</h1><div id="sectionSection0" class="section" name="collapseableSection" style=""><p>연결 작업의 경우 SQL Server용 Microsoft JDBC Driver에서 클라이언트 연결 ID를 전송합니다. 연결에 실패하면 연결 링 버퍼(<a href="http://go.microsoft.com/fwlink/?LinkId=207752">연결 링 버퍼를 사용하여 SQL Server 2008의 연결 문제 해결</a>)에 액세스하고 <span sdata="langKeyword" value="ClientConnectionID"><span class="keyword">ClientConnectionID</span></span> 필드를 검색하여 연결 실패에 대한 진단 정보를 얻을 수 있습니다. 클라이언트 연결 ID는 오류가 발생한 경우에만 링 버퍼에 로그인됩니다. 사전 로그인 패킷을 전송하기 전에 연결이 실패하는 경우 클라이언트 연결 ID가 생성되지 않습니다. 클라이언트 연결 ID는 16바이트 GUID입니다. <span sdata="langKeyword" value="client_connection_id"><span class="keyword">client_connection_id</span></span> 동작이 확장 이벤트 세션의 이벤트에 추가되는 경우 확장 이벤트 대상 출력에서 클라이언트 연결 ID를 검색할 수도 있습니다. 클라이언트 드라이버 진단 추가 지원이 필요한 경우 추적을 활성화하여 연결 명령을 다시 실행하고 추적에 있는 <span sdata="langKeyword" value="ClientConnectionID"><span class="keyword">ClientConnectionID</span></span> 필드를 관찰할 수 있습니다.</p><p><span sdata="link"><a href="031c01e2-2c65-4fe4-9700-fdbcc7a39f30.htm">ISQLServerConnection 인터페이스</a></span>를 사용하여 클라이언트 연결 ID를 프로그래밍 방식으로 얻을 수 있습니다. 연결 ID는 연결 관련 예외에서도 표시됩니다.</p><p>연결 오류가 발생하는 경우 서버의 BID 추적 정보 및 연결 링 버퍼에 있는 클라이언트 연결 ID를 사용하여 클라이언트 연결을 서버에서의 연결로 상관 관계를 지정할 수 있습니다. 서버에서 BID 추적에 대한 자세한 내용은 <a href="http://go.microsoft.com/fwlink/?LinkId=125805">데이터 액세스 추적</a>을 참조하십시오. 데이터 액세스 추적 아티클에는 데이터 액세스 추적 수행에 대한 정보도 포함되어 있습니다. 이 정보는 SQL Server용 Microsoft JDBC Driver에 적용되지 않습니다. SQL Server용 Microsoft JDBC Driver를 사용하여 데이터 액세스 추적을 수행하는 데 대한 정보는 <span sdata="link"><a href="723aeae7-6504-4585-ba8b-3525115bea8b.htm">드라이버 작업 추적</a></span>을 참조하십시오.</p><p>JDBC 드라이버는 또한 스레드별 작업 ID를 전송합니다. TRACK_CAUSAILITY 옵션이 설정된 상태로 세션이 시작하면 작업 ID가 확장 이벤트 세션에 캡처됩니다. 활성 연결의 성능 문제를 위해 클라이언트의 추적(ActivityID 필드)에서 작업 ID를 가져온 다음 확장 이벤트 출력에 작업 ID를 배치할 수 있습니다. 확장 이벤트의 작업 ID는 16바이트 GUID(클라이언트 연결 ID의 GUID와 같지 않음)에 4바이트 시퀀스 번호가 추가된 형식입니다. 시퀀스 번호는 스레드 내 요청의 순서를 나타냅니다. ActivityId는 SQL 배치 문과 RPC 요청을 위해 전송됩니다. ActivityId가 서버로 전송되도록 하려면 먼저 Logging.Properties 파일에 다음 키-값 쌍을 지정해야 합니다.</p><div class="sampleCode"><span codeLanguage="other"><pre>com.microsoft.sqlserver.jdbc.traceactivity = on</pre></span></div><p>자세한 내용은 <span sdata="link"><a href="723aeae7-6504-4585-ba8b-3525115bea8b.htm">드라이버 작업 추적</a></span>을 참조하십시오. 이 추적 플래그는 해당 JDBC 개체 로거와 함께 사용되어 JDBC 드라이버의 ActivityId를 추적하고 전송할지 여부를 결정합니다. Logging.Properties 파일 업데이트 외에 com.microsoft.sqlserver.jdbc 로거를 FINER 이상으로 설정해야 합니다. 특정 클래스에서 생성된 요청에 대해 ActivityId를 서버로 전송하려는 경우 해당 클래스 로거는 FINER 또는 FINEST로 설정되어야 합니다. 예를 들어, 클래스가 SQLServerStatement인 경우 com.microsoft.sqlserver.jdbc.SQLServerStatement 로거를 설정해야 합니다.</p><p>다음은 링 버퍼에 저장되어 RPC의 클라이언트 및 배치 작업에서 전송된 활동 ID를 기록할 확장 이벤트 세션을 시작하기 위해 Transact-SQL을 사용하는 샘플입니다.</p><div class="sampleCode"><span codeLanguage="other"><pre>create event session MySession on server
add event connectivity_ring_buffer_recorded,
add event sql_statement_starting (action (client_connection_id)),
add event sql_statement_completed (action (client_connection_id)),
add event rpc_starting (action (client_connection_id)),
add event rpc_completed (action (client_connection_id))
add target ring_buffer with (track_causality=on)</pre></span></div></div><span id="seeAlsoSpan"><h1 class="heading">참고 항목</h1></span><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><div class="seeAlsoStyle"><span sdata="link"><a href="723e2680-a0c5-4a7d-a319-1e49e41078cf.htm">JDBC 드라이버 관련 문제 진단</a></span></div></div></div><div id="footer" class="section"><span id="feedbackarea">이 항목에 대한 <a href="javascript:SubmitFeedback('DevDocs@Microsoft.com','','','','8.0.12060.10000','%0\d의견을%20보내주셔서%20감사합니다.%20개발자%20작성%20팀에서는%20설명서를%20보완하는%20데%20보내주신%20의견을%20적극%20활용하고%20있습니다.%20보내주신%20의견을%20검토하는%20동안%20명확한%20설명이%20필요하거나%20해결책에%20대한%20추가%20의견을%20묻는%20전자%20메일을%20받을%20수%20있습니다.%20귀하의%20전자%20메일은%20기타%20다른%20용도로%20사용되지%20않고%20검토가%20끝난%20후%20바로%20폐기됩니다.%0\AMicrosoft의%20개인%20정보%20취급%20방침에%20대한%20자세한%20내용은%20http://privacy.microsoft.com/ko-kr/default.aspx를%20참조하십시오.%0\A%0\d','고객%20의견');">사용자 의견</a>을 Microsoft로 보내 주십시오.</span><span id="copyrightarea"><p><a href="9bad553b-9e70-4696-8499-2e35f772a1e0.htm">© 2012 Microsoft. All rights reserved.</a></p></span></div></div></body></html>